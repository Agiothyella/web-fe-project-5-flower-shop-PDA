const pxBreakpoints=[1200,1e3,800,600,450],emBreakpoints=[75,62.5,50,37.5,28.125],viewportInitH=document.documentElement.clientHeight,viewportInitW=document.documentElement.clientWidth,headerEl=document.querySelector(".header"),headerNavEl=document.querySelector(".header__nav"),headerNavListEl=document.querySelector(".header__nav__list"),headerNavItemEl=document.querySelectorAll(".header__nav__item"),headerNavLinkEl=document.querySelectorAll(".header__nav__link"),headerSubnavEl=document.querySelectorAll(".header__subnav"),headerSubnavContainerEl=document.querySelectorAll(".header__subnav__container"),headerSubnavMainEl=document.querySelectorAll(".header__subnav__main"),subnavLinkEl=document.querySelectorAll(".header__subnav__link"),searchBar=document.querySelectorAll(".c-search__input"),searchBtn=document.querySelectorAll(".c-search__button"),headerNavSmallEl=document.querySelector(".header__nav-small"),headerSubnavBack=document.querySelectorAll(".header__subnav__back"),todayEl=document.querySelector(".section--today"),saleImgEl=document.querySelectorAll(".sale__img"),saleCatalogueEl=document.querySelectorAll(".sale__catalogue"),saleTitleEl=document.querySelectorAll(".sale__title"),saleMoreEl=document.querySelectorAll(".sale__more"),seasonalEl=document.querySelector(".seasonal__season"),seasonEl=document.querySelectorAll(".season"),seasonSubtitleEl=document.querySelectorAll(".season__subtitle"),seasonFlowersEl=document.querySelectorAll(".season__flowers"),activeSeason=document.querySelector(".active-season"),reviewShopEl=document.querySelector(".review__rating__star"),reviewProductsEl=document.querySelectorAll(".review__testimonials__star"),reviewProductEl=document.querySelectorAll(".review__product__review"),footerMapHeadEl=document.querySelectorAll(".footer__sitemap__header"),renderZPattern=function(nodeList,class1="_",class2="_"){nodeList.forEach(function(node,i){i%2==0?node.classList.add(class1):node.classList.add(class2)})},addClassToNodeList=function(nodeList,classToAdd){nodeList.forEach(node=>node.classList.add(classToAdd))},removeClassFromNodeList=function(nodeList,className){nodeList.forEach(node=>node.classList.remove(className))},calculateSize=function(){const headerHeightRes=headerEl.getBoundingClientRect().height,viewportH=document.documentElement.clientHeight;todayEl.style.marginTop=`${headerHeightRes}px`,headerNavListEl.style.height=null;for(let i=0;i<searchBar.length;i++){var btnHeight=searchBtn[i].getBoundingClientRect().height;searchBar[i].style.height=`${btnHeight+2}px`}headerSubnavEl.forEach(node=>{node.style.top=`${headerHeightRes}px`;var subNavH=node.getBoundingClientRect().height;subNavH+headerHeightRes>=viewportH?node.style.height=`${viewportH-headerHeightRes}px`:subNavH+headerHeightRes<viewportH&&(node.style.height="auto")})},calculateSizeMobile=function(){var headerHeightRes=headerEl.getBoundingClientRect().height,viewportH=document.documentElement.clientHeight;todayEl.style.marginTop=`${headerHeightRes}px`;for(let i=0;i<searchBar.length;i++){var btnHeight=searchBtn[i].getBoundingClientRect().height;searchBar[i].style.height=`${btnHeight+2}px`}headerNavListEl.style.height=`${viewportH-headerHeightRes}px`,headerSubnavEl.forEach(node=>{node.style.top=null,node.style.height=null})},seasonWidth=function(){const activeSeasonWidth=activeSeason.getBoundingClientRect().width;window.matchMedia(`(max-width: ${emBreakpoints[4]}em)`).matches?seasonFlowersEl.forEach(node=>node.style.width=null):window.matchMedia(`(max-width: ${emBreakpoints[2]}em)`).matches?seasonFlowersEl.forEach(node=>node.style.width="350px"):seasonFlowersEl.forEach(node=>node.style.width=`${.6*activeSeasonWidth}px`)},zPatternSale=function(){renderZPattern(saleCatalogueEl,"sale__catalogue--left","sale__catalogue--right"),renderZPattern(saleImgEl,"sale__img--right","sale__img--left"),renderZPattern(saleImgEl,"_","u-flip-img-h"),renderZPattern(saleTitleEl,"sale__title--right","sale__title--left"),renderZPattern(saleMoreEl,"sale__more--left","sale__more--right")},initNodeListClases=function(){addClassToNodeList(headerSubnavContainerEl,"flex"),addClassToNodeList(headerSubnavContainerEl,"flex--normal-h"),addClassToNodeList(headerSubnavContainerEl,"flex--stretch-start"),addClassToNodeList(headerSubnavEl,"flex"),addClassToNodeList(headerSubnavEl,"flex--normal-v"),addClassToNodeList(headerSubnavEl,"flex--stretch-center"),addClassToNodeList(headerSubnavMainEl,"flex"),addClassToNodeList(headerSubnavMainEl,"flex--normal-h"),addClassToNodeList(headerSubnavMainEl,"flex--stretch-start"),addClassToNodeList(reviewProductEl,"flex"),addClassToNodeList(reviewProductEl,"flex--normal-v"),addClassToNodeList(reviewProductEl,"flex--stretch-stretch")},initZPattern=function(){zPatternSale()},initPage=function(){initNodeListClases()},lazyCatalogues=new LazyLoad;let subnavOpen=0;headerSubnavEl.forEach(node=>{node.previousElementSibling.classList.add("nav__have-subnav"),node.addEventListener("mouseenter",function(e){e.target.previousElementSibling.classList.add("subnav-open"),subnavOpen=1}),node.addEventListener("mouseleave",function(e){e.target.previousElementSibling.classList.remove("subnav-open"),subnavOpen=0})}),headerNavLinkEl.forEach(function(link){link.classList.contains("nav__have-subnav")&&(link.addEventListener("click",function(e){return 1===subnavOpen&&e.target.classList.contains("active-subnav")?(e.preventDefault(),removeClassFromNodeList(headerNavLinkEl,"active-subnav"),removeClassFromNodeList(headerNavLinkEl,"subnav-open"),subnavOpen=0,subnavOpen):(e.preventDefault(),removeClassFromNodeList(headerNavLinkEl,"active-subnav"),removeClassFromNodeList(headerNavLinkEl,"subnav-open"),e.target.classList.add("active-subnav"),e.target.classList.add("subnav-open"),void(subnavOpen=1))}),link.addEventListener("mouseenter",function(e){return window.matchMedia(`(max-width: ${emBreakpoints[3]}em)`).matches?null:(e.target.classList.add("subnav-open"),calculateSize(),void(subnavOpen=1))}),link.addEventListener("mouseleave",function(e){return window.matchMedia(`(max-width: ${emBreakpoints[3]}em)`).matches?null:(e.target.classList.remove("subnav-open"),void(subnavOpen=0))}),link.addEventListener("focus",function(e){removeClassFromNodeList(headerNavLinkEl,"subnav-open"),e.target.classList.add("subnav-open"),calculateSize(),subnavOpen=1}),link.addEventListener("mousedown",function(e){e.preventDefault()}))}),headerSubnavBack.forEach(node=>{node.addEventListener("click",function(){removeClassFromNodeList(headerNavLinkEl,"active-subnav"),removeClassFromNodeList(headerNavLinkEl,"subnav-open"),subnavOpen=0})}),subnavLinkEl.forEach(node=>{node.addEventListener("click",function(e){removeClassFromNodeList(headerNavLinkEl,"active-subnav"),removeClassFromNodeList(headerNavLinkEl,"subnav-open"),headerNavListEl.classList.remove("mobile__nav-open"),subnavOpen=0})}),document.addEventListener("click",function(e){null===e.target.closest(".header__subnav")&&!e.target.classList.contains("nav__have-subnav")&&0<subnavOpen&&(removeClassFromNodeList(headerNavLinkEl,"subnav-open"),subnavOpen=0)}),subnavLinkEl[subnavLinkEl.length-1].addEventListener("blur",e=>e.target.closest(".header__subnav").previousElementSibling.classList.remove("subnav-open")),headerNavSmallEl.addEventListener("click",function(e){headerNavListEl.classList.toggle("mobile__nav-open"),removeClassFromNodeList(headerNavLinkEl,"active-subnav"),removeClassFromNodeList(headerNavLinkEl,"subnav-open"),setTimeout(calculateSizeMobile,105)}),seasonEl.forEach(node=>node.addEventListener("click",function(e){removeClassFromNodeList(seasonEl,"active-season"),node.classList.add("active-season")})),footerMapHeadEl.forEach(node=>{node.classList.add("accordion"),node.addEventListener("click",function(e){this.classList.toggle("accordion-active");const accItem=node.nextElementSibling;accItem.style.maxHeight?accItem.style.maxHeight=null:accItem.style.maxHeight=accItem.scrollHeight+"px"})}),(viewportInitW>pxBreakpoints[3]?calculateSize:calculateSizeMobile)(),window.addEventListener("resize",function(){seasonWidth(),removeClassFromNodeList(headerNavLinkEl,"active-subnav"),removeClassFromNodeList(headerNavLinkEl,"subnav-open"),subnavOpen=0,window.matchMedia(`(max-width: ${emBreakpoints[3]}em)`).matches?calculateSizeMobile():(headerNavListEl.classList.remove("mobile__nav-open"),calculateSize())}),seasonWidth(),initPage(),lazyCatalogues.update();